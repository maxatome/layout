use strict;
use warnings;
use 5.010;

use Test::More tests => 2 * 18;

use Area;

#
# horizontal_union
#
my @tests = (
    [ '10x20+0+0', '10x20+10+10' => '10x10+0+0 20x10+0+10 10x10+10+20' ],
    [ '10x20+0+10', '10x20+10+0' => '10x10+10+0 20x10+0+10 10x10+0+20' ],
    [ '10x30+0+0', '10x10+10+10' => '10x10+0+0 20x10+0+10 10x10+0+20' ],
    [ '10x10+0+10', '10x30+10+0' => '10x10+10+0 20x10+0+10 10x10+10+20' ],
    [ '10x10+0+0', '10x20+10+0'  => '20x10+0+0 10x10+10+10' ],
    [ '10x20+0+0', '10x10+10+0'  => '20x10+0+0 10x10+0+10' ],
    [ '10x10+0+10', '10x20+10+0' => '10x10+10+0 20x10+0+10' ],
    [ '10x20+0+0', '10x10+10+10' => '10x10+0+0 20x10+0+10' ],
    [ '10x10+0+0', '10x10+10+0'  => '20x10+0+0'],
    );

my $ret;
foreach my $ref_test (@tests)
{
    my $a1 = Area->new($ref_test->[0]);
    my $a2 = Area->new($ref_test->[1]);

    my @ua = $a1->horizontal_union($a2);
    my @ub = $a2->horizontal_union($a1);

    is("@ua", $ref_test->[2],
       'horizontal_union(a2): ' . join(' -- ', @$ref_test[0, 1]));

    is("@ub", $ref_test->[2],
       'horizontal_union(a1): ' . join(' -- ', @$ref_test[0, 1]));
}


#
# vertical_union
#
@tests = (
    [ '20x10+0+0', '20x10+10+10' => '10x10+0+0 10x20+10+0 10x10+20+10' ],
    [ '20x10+10+0', '20x10+0+10' => '10x10+0+10 10x20+10+0 10x10+20+0' ],
    [ '30x10+0+0', '10x10+10+10' => '10x10+0+0 10x20+10+0 10x10+20+0' ],
    [ '10x10+10+0', '30x10+0+10' => '10x10+0+10 10x20+10+0 10x10+20+10' ],
    [ '20x10+0+0', '10x10+10+10' => '10x10+0+0 10x20+10+0' ],
    [ '20x10+0+0', '10x10+0+10'  => '10x20+0+0 10x10+10+0' ],
    [ '10x10+10+0', '20x10+0+10' => '10x10+0+10 10x20+10+0' ],
    [ '10x10+0+0', '20x10+0+10'  => '10x20+0+0 10x10+10+10' ],
    [ '20x10+0+0', '20x10+0+10'  => '20x20+0+0' ],
    );

foreach my $ref_test (@tests)
{
    my $a1 = Area->new($ref_test->[0]);
    my $a2 = Area->new($ref_test->[1]);

    my @ua = $a1->vertical_union($a2);
    my @ub = $a2->vertical_union($a1);

    is("@ua", $ref_test->[2],
       'vertical_union(a2): ' . join(' -- ', @$ref_test[0, 1]));

    is("@ub", $ref_test->[2],
       'vertical_union(a1): ' . join(' -- ', @$ref_test[0, 1]));
}
